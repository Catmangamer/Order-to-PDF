<!DOCTYPE html>
<html>
<head>
    <title>Clover Order to PDF</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
    <h1>Order Lookup</h1>
    <button onclick="getOrders()">Fetch Orders</button>
    <div id="orderData"></div>
    <button onclick="generatePDF()">Download as PDF</button>
    <script src="script.js"></script>

    <div class="box">
        <p><strong>Authorization Code:</strong></p>
        <p class="code" id="authCode">Waiting for code...</p>
        <button onclick="copyCode()">📋 Copy Code to Clipboard</button>
    </div>

    <script>
    // Extract ?code=... from the URL
    const params = new URLSearchParams(window.location.search);
    const code = params.get("code");

    const codeDisplay = document.getElementById("authCode");

    if (code) {
      codeDisplay.textContent = code;
    } else {
      codeDisplay.textContent = "No code found in URL.";
    }

    function copyCode() {
      if (code) {
        navigator.clipboard.writeText(code).then(() => {
          alert("Code copied to clipboard!");
        });
      }
    }
    </script>
</body>
</html>